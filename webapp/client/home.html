<template name="home">
  {{> homeWelcome}}

  <h1>Teo's experiment</h1>
  <a href={{pathFor "createForm"}} class="ui button">
    Create form
  </a>
  <a href={{pathFor "createRecord"}} class="ui button">
    Create record
  </a>
  <a href={{pathFor "editRecords"}} class="ui button">
    Edit records
  </a>
  <a href={{pathFor "manageDataSets"}} class="ui button">
    Manage data sets
  </a>

  {{> listDataSets}}

  {{> listTools}}
</template>



<template name="homeWelcome">
  {{#if shouldWelcome}}
    <div class="row">
      <div class="column">
        <div class="ui icon massive info message">
          <!-- <i class="fa fa-heartbeat icon"></i>
          <i class="fa fa-user-md icon"></i>
          <i class="fa fa-medkit icon"></i> -->
          <i class="treatment icon"></i>
          <i class="close icon never-show-again"></i>

          <div class="content">
            <div class="ui header">
              Welcome to PatientCare
            </div>
            <p>
              PatientCare helps doctors and researchers make
              personalized treatment decisions for cancer patients.
            </p>
          </div>
        </div>
      </div>
    </div>
  {{/if}}
</template>



<template name="listDataSets">
  <h1>Data sets</h1>

  {{#if Template.subscriptionsReady}}
    {{#if length getDataSets}}
      <div class="ui cards">
        {{#each getDataSets}}
          <a href={{pathFor "dataSet" data_set_id=_id}} class="ui card">
            <div class="content">
              <div class="header">{{name}}</div>
              <div class="description">
                {{description}}
              </div>
            </div>
            <div class="extra content">
              <div class="ui grid">
                <div class="eight wide column">
                  <i class="users icon"></i>
                  {{#if length patients}}
                    {{length patients}} Patients
                  {{else}}
                    No patients
                  {{/if}}
                </div>
                <div class="eight wide column">
                  <i class="flask icon"></i>
                  {{#if length sample_labels}}
                    {{length sample_labels}} Samples
                  {{else}}
                    No samples
                  {{/if}}
                </div>
              </div>
            </div>
          </a>
        {{/each}}
      </div>
    {{else}}
      <div class="ui icon message">
        <i class="frown icon"></i>
        <div class="content">
          <div class="header">
            No data sets
          </div>
          <p>You don't have access to any data sets.</p>
        </div>
      </div>
    {{/if}}
  {{else}}
    {{> dataLoading}}
  {{/if}}
</template>



<template name="listTools">
  <h1>Tools</h1>

  <div class="ui cards">
    <a href={{pathFor "listLimmaGSEA"}} class="ui card">
      <div class="content">
        <div class="header">
          Limma <i class="right arrow icon"></i> GSEA
        </div>
        <div class="description">
          Run Limma on a contrast and then run GSEA on the output.
        </div>
      </div>
    </a>
  </div>
</template>
