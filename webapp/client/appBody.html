<template name="appBody">
  <div class="ui container">
    <div style="margin-bottom: 10px;">
      <div class="ui breadcrumb large">
        {{#breadcrumbItem isActive=(isActiveRoute "home")
            href=(pathFor 'home')}}
          Home
        {{/breadcrumbItem}}

        {{#if params.study_label}}
          {{#breadcrumbItem isActive=(isActiveRoute "study")
              href=(pathFor "study" study_label=params.study_label)}}
            {{getShortName}}
          {{/breadcrumbItem}}
        {{/if}}

        {{#if params.patient_label}}
          {{#breadcrumbItem isActive=(isActiveRoute "patient")
              href=(pathFor "patient" study_label=params.study_label patient_label=params.patient_label)}}
            {{params.patient_label}}
          {{/breadcrumbItem}}
        {{/if}}

        {{#if params.job_id}}
          {{#breadcrumbItem isActive=(isActiveRoute "upDownGenes")
              href="TODO"}}
            Gene Outlier Analysis
          {{/breadcrumbItem}}
        {{/if}}

        {{#if isActiveRoute "listLimmaGSEA"}}
          {{#breadcrumbItem isActive=true}}
            Limma <i class="right arrow icon"></i> GSEA
          {{/breadcrumbItem}}
        {{/if}}
      </div>

      <div style="float: right;">
        {{> loginButtons}}
      </div>
    </div>

    {{#if loggingIn}}
      <div class="ui massive icon message">
        <i class="notched circle loading icon"></i>
        <div class="content">
          <div class="header">
            Logging in...
          </div>
          <p>
            You'll be on your way in just a moment!
          </p>
        </div>
      </div>
    {{else}}
      {{#if currentMedBookUser}}
        {{>Template.dynamic template=content data=params}}
      {{else}}
        <div class="ui massive icon message">
          <i class="warning sign icon"></i>
          <div class="content">
            <div class="header">
              Not logged in!
            </div>
            <p>
              Please log in to continue
            </p>
          </div>
        </div>
      {{/if}}
    {{/if}}
  </div>
</template>

<template name="breadcrumbItem">
  {{#if isActive}}
    <div class="section active">
      {{> UI.contentBlock}}
    </div>
  {{else}}
    <a href={{href}}>
      {{> UI.contentBlock}}
    </a>
    <span class="divider">/</span>
  {{/if}}
</template>



<template name="dataLoading">
  <div class="ui icon message">
    <i class="notched circle loading icon"></i>
    <div class="content">
      <div class="header">
        One moment please...
      </div>
      <p>We're fetching that data for you.</p>
    </div>
  </div>
</template>

<template name="showErrorMessage">
  {{#with getError}}
    <div class="ui error message">
      <i class="close icon close-error-message"></i>
      <div class="header">{{header}}</div>
      {{{message}}}
    </div>
  {{/with}}
</template>
