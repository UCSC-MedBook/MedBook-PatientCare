<template name="dataSet">
  {{#if Template.subscriptionsReady}}
    {{#with getDataSet}}
      <h1 class="ui header">{{name}}</h1>

      <h3>Patients</h3>
      {{#if length patients}}
        <table class="ui celled striped table">
          <thead>
            <tr>
              <th>Patient</th>
              <th>Samples</th>
            </tr>
          </thead>
          <tbody>
            {{#each patients}}
              <tr class="go-to-patient">
                <td>
                  <a href={{pathFor "patient" data_set_id=(param "data_set_id")
                          patient_label=patient_label}}
                      class="header">
                    <i class="fa fa-user icon"></i> {{patient_label}}
                  </a>
                </td>
                <td>
                  {{#if length sample_labels}}
                    <div class="ui list">
                      {{#each sample_labels}}
                        <div class="item">
                          <i class="fa fa-flask"></i> {{this}}
                        </div>
                      {{/each}}
                    </div>
                  {{else}}
                    No samples
                  {{/if}}
                </td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      {{else}}
        <div class="ui message massive">
          <div class="content">
            <div class="header">
              No patients
            </div>
            <p>
              There are no patients in this data set yet.
            </p>
            <p>
              Use Wrangler to add patients to this data set.
            </p>
          </div>
        </div>
      {{/if}}
    {{/with}}

    {{#unless getDataSet}}
      <div class="ui icon message massive">
        <i class="warning sign icon"></i>
        <div class="content">
          <div class="header">
            Uh oh...
          </div>
          <p>We couldn't find the data set with that id.</p>
        </div>
      </div>
    {{/unless}}
  {{else}}
    {{> dataLoading}}
  {{/if}}
</template>
