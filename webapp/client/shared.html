<template name="shareAndDeleteButtons">
  <div class="ui labeled icon tiny buttons {{extraButtonsClass}}">
    <button class="ui secondary share button">
      <i class="share icon"></i>
      Share
    </button>
    <button class="ui negative delete button">
      <i class="trash icon"></i>
      {{#if deleteClicked}}
        Really?
      {{else}}
        Delete
      {{/if}}
    </button>
  </div>
</template>

<template name="editCollaborationsModal">
  <div class="ui edit-collaborations modal">
    <i class="close modal icon"></i>
    <div class="header">
      Edit collaborations
    </div>
    <div class="content">
      <div class="description">
        {{#unless sessionPopulated}}
          <h1>You forgot to set the session variables!</h1>
          <p>
            <code>editCollaborationsCollection</code>
          </p>
          <p>
            <code>editCollaborationsMongoId</code>
          </p>
        {{/unless}}

        <div class="ui header">
          These collaborations can see and edit this object.
        </div>
        {{#if collaborationOptions}}
          {{#autoForm id="editCollaborations" schema=onlyCollaborations}}
            {{> afQuickField name="collaborations" options=collaborationOptions
                type="select" multiple=true search=true
                value=getObject.collaborations}}
          {{/autoForm}}
        {{else}}
          {{> dataLoading}}
        {{/if}}
      </div>
    </div>
    <div class="actions">
      <div class="ui negative right labeled icon button">
        Cancel
        <i class="cancel icon"></i>
      </div>
      <div class="ui positive right labeled icon button
          {{#if waitingForServer}}loading{{/if}}">
        Set collaborations
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>
</template>

<template name="showErrorMessage">
  {{#with getError}}
    <div class="ui negative message">
      <i class="close icon close-error-message"></i>
      <div class="header">{{header}}</div>
      {{{message}}}
    </div>
  {{/with}}
</template>

<template name="contactUsButton">
  <a href="mailto:ucscmedbook@gmail.com?subject=MedBook%20Patient%20Care"
      class="ui button teal">
    <i class="bug icon"></i>
    Contact the MedBook Team
  </a>
</template>

<template name="dataLoading">
  <div class="ui icon message">
    <i class="notched circle loading icon"></i>
    <div class="content">
      <div class="header">
        One moment please...
      </div>
      <p>We're fetching that data for you.</p>
    </div>
  </div>
</template>

<template name="listSamplesButton">
  <div class="ui mini button show-list" style="display: inline;">
    {{#if showList}}Hide{{else}}Show{{/if}} list
  </div>

  {{#if showList}}
    <ul>
      {{#each this}}
        <li>{{this}}</li>
      {{/each}}
    </ul>
  {{/if}}
</template>

<template name="viewJobButton">
  <a href={{href}}
      class="ui right labeled icon {{buttonClass}} button">
    <i class="right arrow icon"></i>
    {{#if compare job.status "done"}}
      View
    {{else}}
      {{capitalize job.status}}
    {{/if}}
  </a>
</template>

<template name="jobStatusWrapper">
  {{#if Template.subscriptionsReady}}
    {{#with getJob}}
      {{#if compare status "done"}}
        {{> Template.contentBlock this}}
      {{/if}}

      {{#if compare status "waiting"}}
        <div class="ui huge info message">
          <div class="header">
            Waiting...
          </div>
          Your job will be run soon.
        </div>
      {{/if}}

      {{#if compare status "running"}}
        <div class="ui huge info message">
          <div class="header">
            Running!
          </div>
          Your job is running.
        </div>
      {{/if}}

      {{#if compare status "error"}}
        <div class="ui huge error message">
          <div class="header">
            Error running job.
          </div>
          <p>
            We have encountered an error running your job.
            If you believe this is an internal error, please {{contactUsButton}}
          </p>
          <p>
            Description: <code>{{error_description}}</code>
          </p>
          {{#if stack_trace}}
            <p>
              <pre><code>{{stack_trace}}</code></pre>
            </p>
          {{/if}}
          <p>
            {{{contactTeoText}}}
          </p>
        </div>
      {{/if}}
    {{/with}}

    {{#unless getJob}}
      <div class="ui icon message massive">
        <i class="warning sign icon"></i>
        <div class="content">
          <div class="header">
            Uh oh...
          </div>
          <p>We couldn't find that job.</p>
          <p>
            If you believe you are seeing this message in error, please
            {{> contactUsButton}}
          </p>
        </div>
      </div>
    {{/unless}}
  {{else}}
    {{> dataLoading}}
  {{/if}}
</template>
